<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suite de Inteligencia de Mercado (IA)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Montserrat', sans-serif; background-color: #f8f9fa; color: #333; }
        :root { --brand-color: #0052CC; --brand-dark: #003E99; }
        .modal { transition: opacity 0.3s ease-in-out; }
        .modal-content { transform: scale(0.95); opacity: 0; transition: all 0.3s ease-in-out; }
        .modal.visible { opacity: 1; pointer-events: auto; }
        .modal.visible .modal-content { transform: scale(1); opacity: 1; }
        .loader { border-top-color: var(--brand-color); animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .tab-button { transition: all 0.3s ease; border-bottom: 3px solid transparent; padding-bottom: 0.75rem; color: #6c757d; }
        .tab-button.active { border-bottom-color: var(--brand-color); color: var(--brand-color); font-weight: 700; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .prose h3 { font-size: 1.5rem; font-weight: bold; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .prose strong { font-weight: bold; }
        .prose sup { font-size: 0.75em; vertical-align: super; }
    </style>
</head>
<body class="antialiased">

    <!-- Modal de Configuración -->
    <div id="config-modal" class="modal fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4 opacity-0 pointer-events-none">
        <div class="modal-content bg-white rounded-lg shadow-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Centro de Mando Estratégico</h2>
            <p class="text-gray-600 mb-6">Define tu negocio para que la IA genere una estrategia 100% a medida.</p>
            <div class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="company-name-input" class="block text-sm font-bold text-gray-700 mb-1">Nombre de la Empresa:</label>
                        <input type="text" id="company-name-input" class="w-full bg-gray-50 border border-gray-300 text-gray-800 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ej: Mi Tienda Online">
                    </div>
                    <div>
                        <label for="company-sector-input" class="block text-sm font-bold text-gray-700 mb-1">Sector y País:</label>
                        <input type="text" id="company-sector-input" class="w-full bg-gray-50 border border-gray-300 text-gray-800 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ej: E-commerce de Zapatillas en Perú">
                    </div>
                </div>
                 <div>
                    <label for="api-key-input" class="block text-sm font-bold text-gray-700 mb-1">Tu Clave API de Google AI:</label>
                    <input type="password" id="api-key-input" class="w-full bg-gray-50 border border-gray-300 text-gray-800 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Pega tu clave aquí (comienza con AIzaSy...)">
                    <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-sm text-blue-600 hover:underline mt-1 inline-block">¿No tienes una clave? Obtenla gratis.</a>
                </div>
                <div>
                    <label for="products-input" class="block text-sm font-bold text-gray-700 mb-1">Productos/Servicios Clave:</label>
                    <textarea id="products-input" rows="6" class="w-full bg-gray-50 border border-gray-300 text-gray-800 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Pega tu lista de productos aquí.&#10;Ej: Zapatilla Correr Pro, zapatilla correr, https://...&#10;Botines de Cuero, botines cuero hombre, https://..."></textarea>
                    <p class="text-xs text-gray-500 mt-1">Formato por línea: <strong>Nombre del Producto, palabras clave separadas por comas, URL completa</strong></p>
                </div>
            </div>
            <button id="save-config-button" class="mt-8 w-full text-white font-bold py-3 px-8 rounded-md transition duration-300 text-lg shadow-md" style="background-color: var(--brand-color);">Guardar y Empezar</button>
        </div>
    </div>

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="text-center mb-8 relative">
            <h1 id="main-title" class="text-4xl md:text-5xl font-extrabold text-black mb-2 uppercase">SUITE DE INTELIGENCIA IA</h1>
            <p id="main-subtitle" class="text-xl text-gray-700 font-semibold">Configura tu negocio para empezar</p>
            <button id="change-config" class="absolute top-0 right-0 text-sm text-gray-500 hover:text-blue-600 underline">Cambiar Configuración</button>
        </header>

        <div class="bg-white p-6 rounded-lg shadow-md mb-8 max-w-4xl mx-auto border">
            <div class="flex flex-col sm:flex-row gap-4">
                <input type="text" id="keyword-input" class="w-full bg-gray-50 border border-gray-300 text-gray-800 rounded-md px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg" placeholder="Analiza cualquier término...">
                <button id="search-button" class="text-white font-bold py-3 px-8 rounded-md transition duration-300 w-full sm:w-auto flex items-center justify-center text-lg shadow-md" style="background-color: var(--brand-color);">Analizar</button>
            </div>
        </div>
        
        <div id="initial-state" class="text-center p-8 bg-white rounded-lg max-w-4xl mx-auto border">
             <h2 class="text-2xl font-bold text-gray-800">Bienvenido a tu Suite de Inteligencia de Mercado</h2>
             <p class="text-gray-600 mt-2">Introduce un término de búsqueda para comenzar.</p>
        </div>

        <div id="results-container" class="hidden">
             <!-- Los resultados se renderizarán aquí dinámicamente -->
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const App = {
        state: { config: null, currentKeyword: '', currentRelevantProducts: [] },
        elements: {},

        init() {
            this.elements = {
                configModal: document.getElementById('config-modal'),
                companyNameInput: document.getElementById('company-name-input'),
                companySectorInput: document.getElementById('company-sector-input'),
                apiKeyInput: document.getElementById('api-key-input'),
                productsInput: document.getElementById('products-input'),
                saveConfigButton: document.getElementById('save-config-button'),
                changeConfigButton: document.getElementById('change-config'),
                mainTitle: document.getElementById('main-title'),
                mainSubtitle: document.getElementById('main-subtitle'),
                searchButton: document.getElementById('search-button'),
                keywordInput: document.getElementById('keyword-input'),
                resultsContainer: document.getElementById('results-container'),
                initialState: document.getElementById('initial-state'),
            };
            this.loadConfig();
            this.bindEvents();
        },

        bindEvents() {
            this.elements.saveConfigButton.addEventListener('click', () => this.saveConfig());
            this.elements.changeConfigButton.addEventListener('click', () => this.showConfigModal());
            this.elements.searchButton.addEventListener('click', () => this.handleSearch());
            this.elements.keywordInput.addEventListener('keypress', e => e.key === 'Enter' && this.handleSearch());
            this.elements.resultsContainer.addEventListener('click', e => {
                const button = e.target.closest('button');
                if (!button) return;
                if (button.dataset.tab) this.switchTab(button.dataset.tab);
                if (button.classList.contains('develop-answer-button')) this.handleDevelopAnswer(button);
                if (button.id === 'generate-blog-button') this.generateBlogPost();
                if (button.classList.contains('copy-button')) this.copyToClipboard(button);
            });
        },

        loadConfig() {
            const storedConfig = localStorage.getItem('universalSuiteConfig_v4');
            if (storedConfig) {
                this.state.config = JSON.parse(storedConfig);
                this.updateHeaders();
            } else {
                this.showConfigModal();
            }
        },

        saveConfig() {
            const productsText = this.elements.productsInput.value.trim();
            const newConfig = {
                name: this.elements.companyNameInput.value.trim(),
                sector: this.elements.companySectorInput.value.trim(),
                apiKey: this.elements.apiKeyInput.value.trim(),
                productsText: productsText,
                products: this.parseProducts(productsText)
            };
            if (!newConfig.name || !newConfig.sector || !newConfig.apiKey) {
                alert('Nombre, Sector y Clave API son obligatorios.');
                return;
            }
            this.state.config = newConfig;
            localStorage.setItem('universalSuiteConfig_v4', JSON.stringify(newConfig));
            this.updateHeaders();
            this.hideConfigModal();
        },

        showConfigModal() {
            if (this.state.config) {
                this.elements.companyNameInput.value = this.state.config.name || '';
                this.elements.companySectorInput.value = this.state.config.sector || '';
                this.elements.apiKeyInput.value = this.state.config.apiKey || '';
                this.elements.productsInput.value = this.state.config.productsText || '';
            }
            this.elements.configModal.classList.add('visible');
        },

        hideConfigModal() { this.elements.configModal.classList.remove('visible'); },

        updateHeaders() {
            if (this.state.config?.name) {
                this.elements.mainTitle.innerHTML = `${this.state.config.name.toUpperCase()} <span style="color: var(--brand-color);">IA</span>`;
                this.elements.mainSubtitle.textContent = `Análisis Estratégico para: ${this.state.config.sector}`;
            }
        },

        parseProducts(productsText) {
            if (!productsText) return [];
            return productsText.split('\n').filter(line => line.trim() !== '').map(line => {
                const parts = line.split(',');
                if (parts.length < 3) return null;
                const name = parts.shift().trim();
                const url = parts.pop().trim();
                const triggers = parts.map(t => t.trim().toLowerCase());
                return { name, triggers, url };
            }).filter(p => p);
        },

        async handleSearch() {
            if (!this.state.config) { this.showConfigModal(); return; }
            this.state.currentKeyword = this.elements.keywordInput.value.trim();
            if (!this.state.currentKeyword) { alert("Por favor, introduce una palabra clave."); return; }
            
            this.elements.initialState.classList.add('hidden');
            this.elements.resultsContainer.classList.remove('hidden');
            this.renderLoader(`La IA está analizando el mercado para "${this.state.currentKeyword}"...`);

            try {
                this.state.currentRelevantProducts = this.findRelevantProducts(this.state.currentKeyword);
                const seoData = await this.fetchAiSeoData(this.state.currentKeyword);
                
                this.renderLayout();
                this.renderAllTabs(seoData);
                
                const summaryHtml = await this.generateStrategicSummary(seoData);
                document.getElementById('strategic-summary-container').innerHTML = summaryHtml;
            } catch (e) {
                this.renderError(e.message);
            }
        },

        findRelevantProducts(mainKeyword) {
            if (!this.state.config?.products) return [];
            const found = new Set();
            this.state.config.products.forEach(p => p.triggers.some(t => mainKeyword.toLowerCase().includes(t)) && found.add(p));
            return Array.from(found);
        },

        async callGeminiAPI(systemPrompt, userQuery, responseMimeType = "application/json") {
            if (!this.state.config?.apiKey) throw new Error("Clave API no configurada.");
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${this.state.config.apiKey}`;
            const payload = { contents: [{ parts: [{ text: userQuery }] }], systemInstruction: { parts: [{ text: systemPrompt }] }, generationConfig: { responseMimeType } };
            const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            if (!response.ok) { const errorBody = await response.json(); throw new Error(errorBody?.error?.message || `Error de API: ${response.statusText}`); }
            const result = await response.json();
            if (!result.candidates?.[0]?.content) throw new Error("La IA no generó una respuesta válida (puede ser por políticas de seguridad).");
            return result.candidates[0].content.parts[0].text;
        },

        async fetchAiSeoData(keyword) {
            const systemPrompt = `You are a highly accurate SEO Data Analyst AI. Your sole purpose is to provide realistic, reliable SEO metrics emulating top-tier paid tools like SEMrush or Ahrefs for the specified market. Your response MUST be a single, minified JSON object with this exact structure: {"volume": <number>, "difficulty": <number>, "cpc": <number>, "relatedKeywords": [{"keyword": "<string>", "volume": <number>, "difficulty": <number>}], "peopleAlsoAsk": [{"q": "<string>", "category": "<string>"}]}. The "peopleAlsoAsk" array must contain at least 15 diverse questions. All data MUST be accurate for the specified market. DO NOT add any extra text, explanations, or formatting. Only the JSON.`;
            const userQuery = `Generate the SEO data JSON for the keyword "${keyword}" for the market: "${this.state.config.sector}".`;
            const jsonString = await this.callGeminiAPI(systemPrompt, userQuery);
            try { return JSON.parse(jsonString); } catch (e) { throw new Error("La IA de datos devolvió un formato incorrecto. Intenta de nuevo."); }
        },

        async generateContent(systemPrompt, userQuery){
            return this.callGeminiAPI(systemPrompt, userQuery, "text/plain");
        },
        
        async generateStrategicSummary(seoData) {
            const systemPrompt = `You are a Chief Marketing Officer for "${this.state.config.name}".`;
            const userQuery = `Based on SEO data for "${this.state.currentKeyword}": ${JSON.stringify(seoData)}, and knowing the relevant products are ${this.state.currentRelevantProducts.map(p=>p.name).join(', ') || 'none'}, provide a concise executive summary (4-5 sentences) with prioritized actions. Format as simple HTML (<p>, <strong>).`;
            return this.generateContent(systemPrompt, userQuery);
        },

        async handleDevelopAnswer(button) {
            const question = button.dataset.question;
            const answerContainer = button.closest('li').querySelector('.answer-container');
            button.disabled = true;
            button.textContent = '...';
            answerContainer.style.display = 'block';
            answerContainer.innerHTML = `<div class="p-4"><div class="loader h-6 w-6 mx-auto"></div></div>`;
            try {
                const systemPrompt = `You are an expert copywriter for "${this.state.config.name}", specializing in "${this.state.config.sector}".`;
                const productContext = this.state.currentRelevantProducts.length > 0 ? `Relevant product: ${this.state.currentRelevantProducts[0].name}.` : '';
                const userQuery = `Write an expert, concise answer (100-150 words) for the question: "${question}". ${productContext} Subtly mention the product if it's a good solution. Format as simple HTML (<p>, <strong>, <ul>, <li>).`;
                answerContainer.innerHTML = `<div class="prose max-w-none p-4">${await this.generateContent(systemPrompt, userQuery)}</div>`;
            } catch (error) {
                answerContainer.innerHTML = `<p class="text-red-600 p-4">Error: ${error.message}</p>`;
            } finally {
                button.disabled = false;
                button.textContent = 'Desarrollar';
            }
        },

        async generateBlogPost() {
            const blogButton = document.getElementById('generate-blog-button');
            const blogLoader = document.getElementById('blog-loader');
            const blogOutput = document.getElementById('blog-output');
            blogButton.style.display = 'none';
            blogLoader.style.display = 'block';
            try {
                const systemPrompt = `You are a senior SEO content strategist for "${this.state.config.name}". You write expert, persuasive, and structured blog posts. YOU MUST follow this structure: 1. Title: "<h3>Title:". 2. Keywords: "<p><strong>SEM Keywords:</strong>". 3. Body: 400-600 words with an engaging intro, product integration (if provided), scientific concepts (using <sup></sup> tags for citations), and [Image reference: detailed description] directives. 4. Format: ONLY use simple HTML (<h3>, <p>, <strong>, <sup>). NO h1, h2, or other tags.`;
                const productPrompt = this.state.currentRelevantProducts.length > 0 ? `The product to integrate is ${this.state.currentRelevantProducts[0].name}.` : '';
                const userQuery = `Write a blog post about "${this.state.currentKeyword}" for the "${this.state.config.sector}" market, following all rules. ${productPrompt}`;
                const blogHtml = await this.generateContent(systemPrompt, userQuery);
                blogOutput.querySelector('#blog-output-content').innerHTML = blogHtml;
                blogOutput.style.display = 'block';
            } catch (error) {
                blogOutput.querySelector('#blog-output-content').innerHTML = `<p class="text-red-600">Error: ${error.message}</p>`;
            } finally {
                blogLoader.style.display = 'none';
            }
        },

        renderLoader(message) {
            this.elements.resultsContainer.innerHTML = `<div class="text-center py-10"><div class="loader h-12 w-12 mx-auto mb-4"></div><p class="text-lg text-gray-600">${message}</p></div>`;
        },
        renderError(message) {
            this.elements.resultsContainer.innerHTML = `<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md my-4 max-w-4xl mx-auto"><strong>Error:</strong> ${message}</div>`;
        },
        renderLayout() {
            this.elements.resultsContainer.innerHTML = `
                <div class="border-b border-gray-200 mb-6">
                    <nav class="flex flex-wrap -mb-px" aria-label="Tabs">
                        <button class="tab-button active" data-tab="summary">Resumen y Productos</button>
                        <button class="tab-button" data-tab="keywords">Palabras Clave</button>
                        <button class="tab-button" data-tab="content">Creación de Contenido</button>
                        <button class="tab-button" data-tab="blog">Creador de Blogs</button>
                    </nav>
                </div>
                <div id="tab-content-summary" class="tab-content active"></div>
                <div id="tab-content-keywords" class="tab-content"></div>
                <div id="tab-content-content" class="tab-content"></div>
                <div id="tab-content-blog" class="tab-content"></div>`;
        },
        renderAllTabs(data) {
            document.getElementById('tab-content-summary').innerHTML = this.renderSummaryTabContent();
            document.getElementById('tab-content-keywords').innerHTML = this.renderKeywordsTabContent(data);
            document.getElementById('tab-content-content').innerHTML = this.renderContentTabContent(data.peopleAlsoAsk || []);
            document.getElementById('tab-content-blog').innerHTML = this.renderBlogTabContent();
            this.switchTab('summary');
        },
        renderSummaryTabContent() {
            return `<div class="p-1"><div id="strategic-summary-container" class="strategic-summary bg-white p-6 rounded-lg shadow-md border"><div class="loader h-8 w-8"></div></div>${this.renderProductRecommendation(this.state.currentRelevantProducts)}</div>`;
        },
        renderProductRecommendation(products) {
            if (!products.length) return '';
            return `<div class="bg-white p-6 rounded-lg shadow-md border mt-6"><h4 class="text-xl font-bold mb-3 text-gray-800">Productos/Servicios Recomendados:</h4><ul class="list-disc list-inside space-y-2">${products.map(p => `<li><a href="${p.url}" target="_blank" class="text-blue-600 hover:underline font-semibold">${p.name}</a></li>`).join('')}</ul></div>`;
        },
        renderKeywordsTabContent(data) {
            const allKeywords = [{ keyword: this.state.currentKeyword, ...data }, ...(data.relatedKeywords || [])];
            const rows = allKeywords.map(kw => {
                const kd = kw.difficulty > 70 ? 'bg-red-500' : kw.difficulty > 40 ? 'bg-yellow-500' : 'bg-green-500';
                return `<tr class="hover:bg-gray-50"><td class="px-6 py-4 text-sm font-medium text-gray-900">${kw.keyword}</td><td class="px-6 py-4 text-sm text-gray-600">${(kw.volume || 0).toLocaleString('es-ES')}</td><td class="px-6 py-4 text-sm text-gray-600"><div class="flex items-center gap-2"><span>${kw.difficulty || 0}</span><div class="w-24 h-2 rounded-full bg-gray-200"><div class="${kd} rounded-full h-full" style="width: ${kw.difficulty || 0}%"></div></div></div></td></tr>`;
            }).join('');
            return `<div class="p-1"><div class="bg-white rounded-lg overflow-hidden shadow-md border"><div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase">Palabra Clave</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase">Volumen</th><th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase">Dificultad (KD)</th></tr></thead><tbody class="bg-white divide-y divide-gray-200">${rows}</tbody></table></div></div></div>`;
        },
        renderContentTabContent(questions) {
            const schema = JSON.stringify({ "@context": "https://schema.org", "@type": "FAQPage", "mainEntity": questions.map(q => ({ "@type": "Question", "name": q.q, "acceptedAnswer": { "@type": "Answer", "text": `Encuentra la respuesta en nuestro artículo sobre ${this.state.currentKeyword}.` } })) }, null, 2);
            const questionsHtml = questions.map(q => `<li class="py-4 border-b last:border-b-0 border-gray-200"><div class="flex justify-between items-center gap-4"><span class="font-semibold text-gray-800">${q.q}</span><button class="develop-answer-button flex-shrink-0 text-white font-semibold py-1 px-3 rounded-full text-xs" style="background-color: var(--brand-color);" data-question="${q.q.replace(/"/g, '&quot;')}">Desarrollar</button></div><div class="answer-container mt-2 bg-gray-50 rounded" style="display: none;"></div></li>`).join('');
            return `<div class="p-1 space-y-8"><div><div class="bg-white p-6 rounded-lg shadow-md border"><h3 class="text-2xl font-bold mb-2">Centro de Creación de Contenido AEO</h3><p class="text-gray-600">Usa la IA para desarrollar respuestas expertas para cada pregunta.</p><ul class="mt-4">${questionsHtml}</ul></div></div><div><div class="bg-white p-6 rounded-lg shadow-md border"><h3 class="text-xl font-bold">Generador de Schema (FAQPage)</h3><p class="text-gray-600">Copia este código en tu página para mejorar tu posicionamiento.</p><div class="mt-4 relative"><pre class="bg-gray-100 p-4 rounded-md overflow-x-auto"><code>${schema}</code></pre><button class="copy-button absolute top-2 right-2 bg-white text-xs px-2 py-1 rounded border">Copiar</button></div></div></div></div>`;
        },
        renderBlogTabContent() {
            return `<div class="p-1"><div class="bg-white rounded-lg p-6 text-center shadow-md border"><h3 class="text-2xl font-bold">Creador de Blogs (Estilo Experto)</h3><p class="text-gray-600 mb-6">Genera un artículo sobre "${this.state.currentKeyword}" con la estructura profesional.</p><button id="generate-blog-button" class="text-white font-bold py-3 px-6 rounded-md shadow-md" style="background-color: var(--brand-color);">Generar Borrador Experto</button><div id="blog-loader" class="text-center py-10" style="display: none;"><div class="loader h-10 w-10 mx-auto mb-4"></div><p>La IA está redactando el artículo...</p></div><div id="blog-output" class="mt-8 text-left" style="display: none;"><div class="border rounded-lg p-6 bg-gray-50 relative"><button class="copy-button absolute top-2 right-2 bg-white text-xs px-2 py-1 rounded border">Copiar HTML</button><div id="blog-output-content" class="prose max-w-none"></div></div></div></div></div>`;
        },

        switchTab(targetTab) {
            this.elements.resultsContainer.querySelectorAll('.tab-button').forEach(t => t.classList.toggle('active', t.dataset.tab === targetTab));
            this.elements.resultsContainer.querySelectorAll('.tab-content').forEach(c => c.style.display = c.id === `tab-content-${targetTab}` ? 'block' : 'none');
        },
        copyToClipboard(button) {
            const blogContainer = button.closest('#blog-output');
            const schemaContainer = button.closest('.relative')?.querySelector('pre');
            const answerContainer = button.closest('.answer-container');
            let textToCopy = '';

            if (blogContainer) textToCopy = blogContainer.querySelector('#blog-output-content').innerHTML;
            else if (schemaContainer) textToCopy = schemaContainer.innerText;
            else if (answerContainer) textToCopy = answerContainer.querySelector('.prose').innerHTML;
            
            if (textToCopy) {
                navigator.clipboard.writeText(textToCopy).then(() => {
                    const originalText = button.textContent;
                    button.textContent = '¡Copiado!';
                    setTimeout(() => { button.textContent = originalText || 'Copiar'; }, 2000);
                });
            }
        }
    };
    App.init();
});
</script>

</body>
</html>